const connection=(new signalR.HubConnectionBuilder).withUrl("/vendingHub").configureLogging(signalR.LogLevel.Information).build();connection.start().catch(n=>console.error(n.toString()));var app=new Vue({el:"#app",data:{message:"Insert coins please, no credit",machine:{products:[],coins:[],customerCoins:[],changeCoins:[]},totalInserted:0,totalChange:0,lowOnCoins:!1},methods:{insertCoin:function(n){connection.invoke("ReceivedCoin",n.cents).catch(n=>console.error(n.toString()))},selectProduct:function(n){connection.invoke("ReceivedSale",n).catch(n=>console.error(n.toString()))},restock:function(){connection.invoke("Restock").catch(n=>console.error(n.toString()))},cancel:function(){connection.invoke("Cancel",!0).catch(n=>console.error(n.toString()))}},beforeCreate:function(){var n=this;console.log("Before Create");connection.on("ReceiveMessage",t=>{console.log("Message from websocket"),console.log(t),n.machine=t,n.totalInserted=n.machine.customerCoins&&n.machine.customerCoins.length>0?n.machine.customerCoins.reduce(function(n,t){return n+t.totalCents},0):0,n.totalChange=n.machine.changeCoins&&n.machine.changeCoins.length>0?n.machine.changeCoins.reduce(function(n,t){return n+t.totalCents},0):0,n.message=n.totalInserted>130?"Select a product or insert more credit":n.totalInserted>0?"Insert coins please, insufficent credit":"Insert coins please, no credit"})},created:function(){console.log("Created");document.getElementById("app").classList.remove("notready")}});